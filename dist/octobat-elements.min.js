!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Octobat=e():t.Octobat=e()}(window,function(){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=13)}([function(t,e,n){"use strict";var o=n(3),r=n(18),i=Object.prototype.toString;function a(t){return"[object Array]"===i.call(t)}function s(t){return null!==t&&"object"==typeof t}function u(t){return"[object Function]"===i.call(t)}function c(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),a(t))for(var n=0,o=t.length;n<o;n++)e.call(null,t[n],n,t);else for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.call(null,t[r],r,t)}t.exports={isArray:a,isArrayBuffer:function(t){return"[object ArrayBuffer]"===i.call(t)},isBuffer:r,isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:s,isUndefined:function(t){return void 0===t},isDate:function(t){return"[object Date]"===i.call(t)},isFile:function(t){return"[object File]"===i.call(t)},isBlob:function(t){return"[object Blob]"===i.call(t)},isFunction:u,isStream:function(t){return s(t)&&u(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:c,merge:function t(){var e={};function n(n,o){"object"==typeof e[o]&&"object"==typeof n?e[o]=t(e[o],n):e[o]=n}for(var o=0,r=arguments.length;o<r;o++)c(arguments[o],n);return e},deepMerge:function t(){var e={};function n(n,o){"object"==typeof e[o]&&"object"==typeof n?e[o]=t(e[o],n):e[o]="object"==typeof n?t({},n):n}for(var o=0,r=arguments.length;o<r;o++)c(arguments[o],n);return e},extend:function(t,e,n){return c(e,function(e,r){t[r]=n&&"function"==typeof e?o(e,n):e}),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){var n,o,r=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{o="function"==typeof clearTimeout?clearTimeout:a}catch(t){o=a}}();var u,c=[],l=!1,d=-1;function h(){l&&u&&(l=!1,u.length?c=u.concat(c):d=-1,c.length&&m())}function m(){if(!l){var t=s(h);l=!0;for(var e=c.length;e;){for(u=c,c=[];++d<e;)u&&u[d].run();d=-1,e=c.length}u=null,l=!1,function(t){if(o===clearTimeout)return clearTimeout(t);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(t);try{o(t)}catch(e){try{return o.call(null,t)}catch(e){return o.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function p(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new f(t,e)),1!==c.length||l||s(m)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=p,r.addListener=p,r.once=p,r.off=p,r.removeListener=p,r.removeAllListeners=p,r.emit=p,r.prependListener=p,r.prependOnceListener=p,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e,n){"use strict";t.exports=function(t,e){return function(){for(var n=new Array(arguments.length),o=0;o<n.length;o++)n[o]=arguments[o];return t.apply(e,n)}}},function(t,e,n){"use strict";var o=n(0);function r(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,n){if(!e)return t;var i;if(n)i=n(e);else if(o.isURLSearchParams(e))i=e.toString();else{var a=[];o.forEach(e,function(t,e){null!=t&&(o.isArray(t)?e+="[]":t=[t],o.forEach(t,function(t){o.isDate(t)?t=t.toISOString():o.isObject(t)&&(t=JSON.stringify(t)),a.push(r(e)+"="+r(t))}))}),i=a.join("&")}if(i){var s=t.indexOf("#");-1!==s&&(t=t.slice(0,s)),t+=(-1===t.indexOf("?")?"?":"&")+i}return t}},function(t,e,n){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},function(t,e,n){"use strict";(function(e){var o=n(0),r=n(23),i={"Content-Type":"application/x-www-form-urlencoded"};function a(t,e){!o.isUndefined(t)&&o.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var s,u={adapter:(void 0!==e&&"[object process]"===Object.prototype.toString.call(e)?s=n(7):"undefined"!=typeof XMLHttpRequest&&(s=n(7)),s),transformRequest:[function(t,e){return r(e,"Accept"),r(e,"Content-Type"),o.isFormData(t)||o.isArrayBuffer(t)||o.isBuffer(t)||o.isStream(t)||o.isFile(t)||o.isBlob(t)?t:o.isArrayBufferView(t)?t.buffer:o.isURLSearchParams(t)?(a(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):o.isObject(t)?(a(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};o.forEach(["delete","get","head"],function(t){u.headers[t]={}}),o.forEach(["post","put","patch"],function(t){u.headers[t]=o.merge(i)}),t.exports=u}).call(this,n(2))},function(t,e,n){"use strict";var o=n(0),r=n(24),i=n(4),a=n(26),s=n(27),u=n(8);t.exports=function(t){return new Promise(function(e,c){var l=t.data,d=t.headers;o.isFormData(l)&&delete d["Content-Type"];var h=new XMLHttpRequest;if(t.auth){var m=t.auth.username||"",f=t.auth.password||"";d.Authorization="Basic "+btoa(m+":"+f)}if(h.open(t.method.toUpperCase(),i(t.url,t.params,t.paramsSerializer),!0),h.timeout=t.timeout,h.onreadystatechange=function(){if(h&&4===h.readyState&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in h?a(h.getAllResponseHeaders()):null,o={data:t.responseType&&"text"!==t.responseType?h.response:h.responseText,status:h.status,statusText:h.statusText,headers:n,config:t,request:h};r(e,c,o),h=null}},h.onabort=function(){h&&(c(u("Request aborted",t,"ECONNABORTED",h)),h=null)},h.onerror=function(){c(u("Network Error",t,null,h)),h=null},h.ontimeout=function(){c(u("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",h)),h=null},o.isStandardBrowserEnv()){var p=n(28),b=(t.withCredentials||s(t.url))&&t.xsrfCookieName?p.read(t.xsrfCookieName):void 0;b&&(d[t.xsrfHeaderName]=b)}if("setRequestHeader"in h&&o.forEach(d,function(t,e){void 0===l&&"content-type"===e.toLowerCase()?delete d[e]:h.setRequestHeader(e,t)}),t.withCredentials&&(h.withCredentials=!0),t.responseType)try{h.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&h.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function(t){h&&(h.abort(),c(t),h=null)}),void 0===l&&(l=null),h.send(l)})}},function(t,e,n){"use strict";var o=n(25);t.exports=function(t,e,n,r,i){var a=new Error(t);return o(a,e,n,r,i)}},function(t,e,n){"use strict";var o=n(0);t.exports=function(t,e){e=e||{};var n={};return o.forEach(["url","method","params","data"],function(t){void 0!==e[t]&&(n[t]=e[t])}),o.forEach(["headers","auth","proxy"],function(r){o.isObject(e[r])?n[r]=o.deepMerge(t[r],e[r]):void 0!==e[r]?n[r]=e[r]:o.isObject(t[r])?n[r]=o.deepMerge(t[r]):void 0!==t[r]&&(n[r]=t[r])}),o.forEach(["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"],function(o){void 0!==e[o]?n[o]=e[o]:void 0!==t[o]&&(n[o]=t[o])}),n}},function(t,e,n){"use strict";function o(t){this.message=t}o.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},o.prototype.__CANCEL__=!0,t.exports=o},function(t,e,n){"use strict";e.a=function(t){var e=this.constructor;return this.then(function(n){return e.resolve(t()).then(function(){return n})},function(n){return e.resolve(t()).then(function(){return e.reject(n)})})}},function(t,e,n){t.exports=n(17)},function(t,e,n){t.exports=n(33)},function(t,e,n){"use strict";(function(t){var e=n(11),o=setTimeout;function r(){}function i(t){if(!(this instanceof i))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],l(t,this)}function a(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,i._immediateFn(function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var o;try{o=n(t._value)}catch(t){return void u(e.promise,t)}s(e.promise,o)}else(1===t._state?s:u)(e.promise,t._value)})):t._deferreds.push(e)}function s(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof i)return t._state=3,t._value=e,void c(t);if("function"==typeof n)return void l((o=n,r=e,function(){o.apply(r,arguments)}),t)}t._state=1,t._value=e,c(t)}catch(e){u(t,e)}var o,r}function u(t,e){t._state=2,t._value=e,c(t)}function c(t){2===t._state&&0===t._deferreds.length&&i._immediateFn(function(){t._handled||i._unhandledRejectionFn(t._value)});for(var e=0,n=t._deferreds.length;e<n;e++)a(t,t._deferreds[e]);t._deferreds=null}function l(t,e){var n=!1;try{t(function(t){n||(n=!0,s(e,t))},function(t){n||(n=!0,u(e,t))})}catch(t){if(n)return;n=!0,u(e,t)}}i.prototype.catch=function(t){return this.then(null,t)},i.prototype.then=function(t,e){var n=new this.constructor(r);return a(this,new function(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}(t,e,n)),n},i.prototype.finally=e.a,i.all=function(t){return new i(function(e,n){if(!t||void 0===t.length)throw new TypeError("Promise.all accepts an array");var o=Array.prototype.slice.call(t);if(0===o.length)return e([]);var r=o.length;function i(t,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(e){i(t,e)},n)}o[t]=a,0==--r&&e(o)}catch(t){n(t)}}for(var a=0;a<o.length;a++)i(a,o[a])})},i.resolve=function(t){return t&&"object"==typeof t&&t.constructor===i?t:new i(function(e){e(t)})},i.reject=function(t){return new i(function(e,n){n(t)})},i.race=function(t){return new i(function(e,n){for(var o=0,r=t.length;o<r;o++)t[o].then(e,n)})},i._immediateFn="function"==typeof t&&function(e){t(e)}||function(t){o(t,0)},i._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)}}).call(this,n(15).setImmediate)},function(t,e,n){(function(t){var o=void 0!==t&&t||"undefined"!=typeof self&&self||window,r=Function.prototype.apply;function i(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new i(r.call(setTimeout,o,arguments),clearTimeout)},e.setInterval=function(){return new i(r.call(setInterval,o,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(o,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(16),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(1))},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var o,r,i,a,s,u=1,c={},l=!1,d=t.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(t);h=h&&h.setTimeout?h:t,"[object process]"==={}.toString.call(t.process)?o=function(t){e.nextTick(function(){f(t)})}:function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?(a="setImmediate$"+Math.random()+"$",s=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(a)&&f(+e.data.slice(a.length))},t.addEventListener?t.addEventListener("message",s,!1):t.attachEvent("onmessage",s),o=function(e){t.postMessage(a+e,"*")}):t.MessageChannel?((i=new MessageChannel).port1.onmessage=function(t){f(t.data)},o=function(t){i.port2.postMessage(t)}):d&&"onreadystatechange"in d.createElement("script")?(r=d.documentElement,o=function(t){var e=d.createElement("script");e.onreadystatechange=function(){f(t),e.onreadystatechange=null,r.removeChild(e),e=null},r.appendChild(e)}):o=function(t){setTimeout(f,0,t)},h.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var r={callback:t,args:e};return c[u]=r,o(u),u++},h.clearImmediate=m}function m(t){delete c[t]}function f(t){if(l)setTimeout(f,0,t);else{var e=c[t];if(e){l=!0;try{!function(t){var e=t.callback,o=t.args;switch(o.length){case 0:e();break;case 1:e(o[0]);break;case 2:e(o[0],o[1]);break;case 3:e(o[0],o[1],o[2]);break;default:e.apply(n,o)}}(e)}finally{m(t),l=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(1),n(2))},function(t,e,n){"use strict";var o=n(0),r=n(3),i=n(19),a=n(9);function s(t){var e=new i(t),n=r(i.prototype.request,e);return o.extend(n,i.prototype,e),o.extend(n,e),n}var u=s(n(6));u.Axios=i,u.create=function(t){return s(a(u.defaults,t))},u.Cancel=n(10),u.CancelToken=n(31),u.isCancel=n(5),u.all=function(t){return Promise.all(t)},u.spread=n(32),t.exports=u,t.exports.default=u},function(t,e){
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
t.exports=function(t){return null!=t&&null!=t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}},function(t,e,n){"use strict";var o=n(0),r=n(4),i=n(20),a=n(21),s=n(9);function u(t){this.defaults=t,this.interceptors={request:new i,response:new i}}u.prototype.request=function(t){"string"==typeof t?(t=arguments[1]||{}).url=arguments[0]:t=t||{},(t=s(this.defaults,t)).method=t.method?t.method.toLowerCase():"get";var e=[a,void 0],n=Promise.resolve(t);for(this.interceptors.request.forEach(function(t){e.unshift(t.fulfilled,t.rejected)}),this.interceptors.response.forEach(function(t){e.push(t.fulfilled,t.rejected)});e.length;)n=n.then(e.shift(),e.shift());return n},u.prototype.getUri=function(t){return t=s(this.defaults,t),r(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},o.forEach(["delete","get","head","options"],function(t){u.prototype[t]=function(e,n){return this.request(o.merge(n||{},{method:t,url:e}))}}),o.forEach(["post","put","patch"],function(t){u.prototype[t]=function(e,n,r){return this.request(o.merge(r||{},{method:t,url:e,data:n}))}}),t.exports=u},function(t,e,n){"use strict";var o=n(0);function r(){this.handlers=[]}r.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},r.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},r.prototype.forEach=function(t){o.forEach(this.handlers,function(e){null!==e&&t(e)})},t.exports=r},function(t,e,n){"use strict";var o=n(0),r=n(22),i=n(5),a=n(6),s=n(29),u=n(30);function c(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function(t){return c(t),t.baseURL&&!s(t.url)&&(t.url=u(t.baseURL,t.url)),t.headers=t.headers||{},t.data=r(t.data,t.headers,t.transformRequest),t.headers=o.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),o.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]}),(t.adapter||a.adapter)(t).then(function(e){return c(t),e.data=r(e.data,e.headers,t.transformResponse),e},function(e){return i(e)||(c(t),e&&e.response&&(e.response.data=r(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}},function(t,e,n){"use strict";var o=n(0);t.exports=function(t,e,n){return o.forEach(n,function(n){t=n(t,e)}),t}},function(t,e,n){"use strict";var o=n(0);t.exports=function(t,e){o.forEach(t,function(n,o){o!==e&&o.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[o])})}},function(t,e,n){"use strict";var o=n(8);t.exports=function(t,e,n){var r=n.config.validateStatus;!r||r(n.status)?t(n):e(o("Request failed with status code "+n.status,n.config,null,n.request,n))}},function(t,e,n){"use strict";t.exports=function(t,e,n,o,r){return t.config=e,n&&(t.code=n),t.request=o,t.response=r,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t}},function(t,e,n){"use strict";var o=n(0),r=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,n,i,a={};return t?(o.forEach(t.split("\n"),function(t){if(i=t.indexOf(":"),e=o.trim(t.substr(0,i)).toLowerCase(),n=o.trim(t.substr(i+1)),e){if(a[e]&&r.indexOf(e)>=0)return;a[e]="set-cookie"===e?(a[e]?a[e]:[]).concat([n]):a[e]?a[e]+", "+n:n}}),a):a}},function(t,e,n){"use strict";var o=n(0);t.exports=o.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(t){var o=t;return e&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return t=r(window.location.href),function(e){var n=o.isString(e)?r(e):e;return n.protocol===t.protocol&&n.host===t.host}}():function(){return!0}},function(t,e,n){"use strict";var o=n(0);t.exports=o.isStandardBrowserEnv()?{write:function(t,e,n,r,i,a){var s=[];s.push(t+"="+encodeURIComponent(e)),o.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),o.isString(r)&&s.push("path="+r),o.isString(i)&&s.push("domain="+i),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(t,e,n){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},function(t,e,n){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},function(t,e,n){"use strict";var o=n(10);function r(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(t){e=t});var n=this;t(function(t){n.reason||(n.reason=new o(t),e(n.reason))})}r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.source=function(){var t;return{token:new r(function(e){t=e}),cancel:t}},t.exports=r},function(t,e,n){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},function(t,e,n){"use strict";n.r(e),n(14);var o=n(12),r=n.n(o).a.create({baseURL:"https://pmgw.octobat.com",headers:{"Content-Type":"application/json",Accept:"application/json","Access-Control-Allow-Origin":"true"}}),i=(t,e,n,o)=>("GET"==e&&null!==o&&(t+=(void 0).encodeURI(JSON.parse(o)),o=null),r.request({method:e.toLowerCase(),url:t,data:o}));const a=new class{constructor(){this._version="3.0.0",this._serverHost="https://pmgw.octobat.com",this._beanieHost="https://apiv2.octobat.com/beanie",this._requestIdentifier=null,this._authToken=null,this._formSelector="#octobat-payment-form",this._formHandler=null,this._formIsSubmittable=!1,this._formIsDisplayable=!1,this._taxCalculation="exclusive",this._taxNumberValidation="true",this._multipleEvidenceCollection=!0,this._orderStatus="pending",this._billingModel=null,this._currency=null,this._billingInterval=null,this._billingIntervalCount=null,this._customerIp=null,this._customerIpCountry=null,this._customerPaymentMethodCountry=null,this._selectedCustomerCountry=null,this._taxIdIsValid=null,this._coupon=null,this._items=[],this._availablePaymentMethods=[],this._selectedPaymentMethod=null,this._selectedPaymentMethodType="card",this._transaction={},this.attachFormHandler()}init(t){return 1===document.querySelectorAll(t).length&&(this.formSelector=t,this.formHandler.bindOctobatForm(),!0)}attachFormHandler(){const t=new class{constructor(t){this._octobat=t,this._octobatPublishableKey=null}get octobat(){return this._octobat}set octobatPublishableKey(t){return r.defaults.headers.Authorization="Basic "+btoa(t+":"),this._octobatPublishableKey=t}bindOctobatForm(){const t=document.querySelector(this.octobat.formSelector);null!==t&&(this.bindFormIsDisplayable(),this.bindFormIsSubmittable(),this.octobatPublishableKey=t.getAttribute("data-octobat-pkey"),null!==t.getAttribute("data-order-id")?this.validateOrder(this.octobat.requestIdentifier):this.createOrder(this.octobat.requestIdentifier),this.getGatewayPkeyAPICall(),this.bindChangeEvents())}makeAPICall(t,e,n,o,i,a,s){return r.defaults.headers.Authorization="Basic "+btoa(a+":"),"GET"==e&&null!==i&&(t+=this.encodeURI(JSON.parse(i)),i=null),r.request({method:e.toLowerCase(),url:t,data:i}).then(({data:t,status:e})=>{s.success(e,t)}).catch(t=>{console.table(t),s.error(t.response.status,t.response.data)})}makeHTTPCall(t,e,n,o,r,i){var a;for(var s in null==i&&(i={}),(a=new XMLHttpRequest).onreadystatechange=()=>{var t;return 4===a.readyState?(t=this.parseJSON(a.responseText)||a.responseText,a.status>=200&&a.status<300?(i.success||debug)(a.status,t):a.status>=300&&(i.error||debug)(a.status,t),void 0!==i.complete&&i.complete(a.status,t)):void 0},"POST"===e?(a.open(e,t,o),a.setRequestHeader("Access-Control-Allow-Origin","true"),a.setRequestHeader("Content-Type","application/json")):(null!==r&&(t+=this.encodeURI(JSON.parse(r)),r=null),a.open(e,t,o)),n)a.setRequestHeader(s,n[s]);return a.send(r)}debug(t,e){return console.log(e),alert(e.message||JSON.stringify(e))}encodeURI(t){return"?"+Object.keys(t).reduce(function(e,n){return e.push(n+"="+encodeURIComponent(t[n])),e},[]).join("&")}parseJSON(t){var e;try{e=JSON.parse(t)}catch(t){return!1}return e}isIE(){return!!(window.navigator.userAgent.indexOf("MSIE ")>0||navigator.userAgent.match(/Trident.*rv\:11\./))}sendEvent(t,e){var n,o;return o=document.querySelector(this.octobat.getFormSelector()),void 0!==window.jQuery?((n=jQuery.Event(t)).detail=e,$(o).trigger(n)):(this.isIE()?(n=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,e):n=new CustomEvent(t,{detail:e,bubbles:!0,cancelable:!0}),o.dispatchEvent(n))}getBindedValue(t){var e;return null!==(e=document.querySelector("[data-octobat='"+t+"']"))&&e.value||""}fillBindedFields(t,e){var n,o;if((n=document.querySelectorAll("."+t)).length>0)for(o=0;o<n.length;)n[o].innerHTML=e,o++}validateOrder(t){var e=document.querySelector(this.octobat.formSelector),n=e.getAttribute("data-gateway")||"stripe",o=e.getAttribute("data-octobat-pkey"),r=e.getAttribute("data-order-id"),i=JSON.stringify({gateway:n});return this.makeAPICall(`${this.octobat.beanieHost}/orders/${r}`,"GET",{},!0,i,o,{success:(e,n)=>{console.table(n),this.octobat.taxCalculation=n.tax_calculation,this.octobat.taxNumberValidation=n.tax_number_validation,this.octobat.multipleEvidenceCollection=n.multiple_evidence_collection,this.octobat.billingModel=n.billing_model,this.octobat.currency=n.currency,n.discount&&(this.octobat.coupon=n.discount),"recurring"==this.octobat.billingModel&&(this.octobat.billingInterval=n.billing_interval,this.octobat.billingIntervalCount=n.billing_interval_count),this.octobat.multipleEvidenceCollection&&this.getCustomerIPAddress(),this.octobat._setItems(n.items),this.octobat.calculateTaxes().then(e=>{this.sendEvent("form.init.complete.octobat",{request_identifier:t})})},error:(t,e)=>{this.sendEvent("form.init.failed.octobat",{message:e.message})}})}createOrder(t){var e=document.querySelector(this.octobat.formSelector),n=e.getAttribute("data-gateway")||"stripe",o=e.getAttribute("data-octobat-pkey");this.validateOrderParams();var r=JSON.parse(e.getAttribute("data-items"));if(null===r)throw new Error('Implementation Error. Invalid JSON provided for data-items. Right syntax example: `data-items=\'[{"plan": "yourplanid"}]\'`');const i=[...r.filter(t=>t.hasOwnProperty("sku")),...r.filter(t=>t.hasOwnProperty("charge"))];var a={gateway:n,tax_calculation:this.octobat.taxCalculation,tax_number_validation:this.octobat.taxNumberValidation};if(i.length>0)a.line_items=i;else{var s={subscription_items:r.filter(t=>t.hasOwnProperty("plan"))};a.subscription_data=s}var u=JSON.stringify(a);return this.makeAPICall(`${this.octobat.beanieHost}/orders`,"POST",{},!0,u,o,{success:(n,o)=>{console.table(o),e.setAttribute("data-order-id",o.id),this.octobat.billingModel=o.billing_model,this.octobat.currency=o.currency,"recurring"==this.octobat.billingModel&&(this.octobat.billingInterval=o.billing_interval_count,this.octobat.billingIntervalCount=o.billing_interval_count),this.octobat._setItems(o.items),this.octobat.calculateTaxes().then(e=>{this.sendEvent("form.init.complete.octobat",{request_identifier:t})})},error:(t,e)=>{this.sendEvent("form.init.failed.octobat",{message:e.message})}})}validateOrderParams(){var t=document.querySelector(this.octobat.formSelector);try{JSON.parse(t.getAttribute("data-items"))}catch(t){throw new Error('Implementation Error. Invalid JSON provided for data-items. Right syntax example: `data-items=\'[{"plan": "yourplanid"}]\'`')}if(null!==t.getAttribute("data-tax-calculation")&&!["inclusive","exclusive","with_exemption"].includes(t.getAttribute("data-tax-calculation")))throw new Error("Implementation Error. Invalid data-tax-calculation parameter. Expected: `inclusive`, `exclusive`, `with_exemption`");if(this.octobat.taxCalculation=t.getAttribute("data-tax-calculation")||"exclusive",null!==t.getAttribute("data-multiple-evidence-collection")&&"true"==t.getAttribute("data-multiple-evidence-collection")&&(this.octobat.multipleEvidenceCollection=!0,this.getCustomerIPAddress()),null!==t.getAttribute("data-tax-number-validation")&&!["true","false","format"].includes(t.getAttribute("data-tax-number-validation")))throw new Error("Implementation Error. Invalid data-tax-number-validation parameter. Expected: `true`, `false`, `format`");this.octobat.taxNumberValidation=t.getAttribute("data-tax-number-validation")||!0}validateCoupon(){var t,e=document.querySelector(this.octobat.getFormSelector()),n=e.getAttribute("data-gateway")||"stripe",o=e.getAttribute("data-octobat-pkey"),r=e.getAttribute("data-order-id"),i=this.getBindedValue("coupon");if(t=null!==this.octobat.billingModel&&"recurring"==this.octobat.billingModel?JSON.stringify({coupon:i,recurring:!0,gateway:n}):JSON.stringify({coupon:i,recurring:!1}),""!=i){var a=`${this.octobat.beanieHost}/orders/${r}/attach_coupon`;this.makeAPICall(a,"POST",{},!0,t,o,{success:(t,e)=>{this.octobat.coupon=e.coupon,this.sendEvent("form.coupon.valid.octobat",{coupon:e.coupon}),this.fillBindedFields("octobat-coupon-check","OK"),this.octobat.calculateTaxes()},error:(t,e)=>{this.fillBindedFields("octobat-coupon-check","Invalid or expired coupon"),this.sendEvent("form.coupon.invalid.octobat"),this.octobat.coupon=null,this.octobat.calculateTaxes()}})}else{var s=`${this.octobat.beanieHost}/orders/${r}/detach_coupon`;this.fillBindedFields("octobat-coupon-check",""),this.octobat.coupon=null,this.makeAPICall(s,"DELETE",{},!0,t,o,{success:(t,e)=>{this.octobat.calculateTaxes()}})}}getCustomerIPAddress(){var t=document.querySelector(this.octobat.getFormSelector()).getAttribute("data-octobat-pkey");this.makeAPICall(this.octobat.serverHost+"/utils/ip.json","GET",{},!0,null,t,{success:(t,e)=>{this.octobat.customerIp=e.query,this.octobat.customerIpCountry=e.country_code,this.setSelectedCountry()},error:(t,e)=>{this.octobat.multipleEvidenceCollection=!1}})}setSelectedCountry(){!0===this.octobat.multipleEvidenceCollection?this.getBindedValue("country")==this.octobat.getCustomerPaymentMethodCountry()||this.getBindedValue("country")==this.octobat.getCustomerIPCountry()?this.octobat.selectedCustomerCountry=this.getBindedValue("country"):this.octobat.getCustomerPaymentMethodCountry()==this.octobat.getCustomerIPCountry()&&null!==this.octobat.getCustomerPaymentMethodCountry()?this.octobat.selectedCustomerCountry=this.octobat.getCustomerPaymentMethodCountry():null!==this.getBindedValue("country")?this.octobat.selectedCustomerCountry=this.getBindedValue("country"):this.octobat.selectedCustomerCountry=this.customerIPCountry():null!==this.getBindedValue("country")?this.octobat.selectedCustomerCountry=this.getBindedValue("country"):this.octobat.selectedCustomerCountry=this.customerIPCountry()}bindChangeEvents(){null!==document.querySelector(this.octobat.getFormSelector())&&(null!==document.querySelector("[data-octobat='coupon']")&&document.querySelector("[data-octobat='coupon']").addEventListener("change",()=>{"pending"==this.octobat.orderStatus&&this.validateCoupon()}),null!==document.querySelector("[data-octobat='country']")&&document.querySelector("[data-octobat='country']").addEventListener("change",()=>{"pending"==this.octobat.orderStatus&&(this.setSelectedCountry(),this.octobat.calculateTaxes())}),null!==document.querySelector("[data-octobat='zip']")&&document.querySelector("[data-octobat='zip']").addEventListener("change",()=>{"pending"==this.octobat.orderStatus&&this.octobat.calculateTaxes()}),null!==document.querySelector("[data-octobat='tax-number']")&&document.querySelector("[data-octobat='tax-number']").addEventListener("change",()=>{"pending"==this.octobat.orderStatus&&this.octobat.calculateTaxes()}))}bindFormIsDisplayable(){void 0!==window.jQuery?$(this.octobat.getFormSelector()).on("form.init.complete.octobat",t=>{this.octobat.formIsDisplayable=!0}):document.querySelector(this.octobat.getFormSelector()).addEventListener("form.init.complete.octobat",t=>{this.octobat.formIsDisplayable=!0})}bindFormIsSubmittable(){void 0!==window.jQuery?$(this.octobat.getFormSelector()).on("form.gateway_pkey.retrieved.octobat",t=>{this.octobat.formIsSubmittable=!0}):document.querySelector(this.octobat.getFormSelector()).addEventListener("form.gateway_pkey.retrieved.octobat",t=>{this.octobat.formIsSubmittable=!0})}getGatewayPkeyAPICall(t){null==t&&(t=!0);var e=document.querySelector(this.octobat.getFormSelector()),n=e.getAttribute("data-gateway")||"stripe",o=e.getAttribute("data-octobat-pkey"),r=JSON.stringify({gateway:n,js_version:this.octobat.version});return this.makeAPICall(this.octobat.serverHost+"/tokens/gateway_pkey","GET",{},t,r,o,{success:(t,e)=>{var n=document.querySelector(this.octobat.getFormSelector());n.setAttribute("data-platform-pkey",e.platform_pkey),n.setAttribute("data-gateway-account",e.uid),this.octobat.authToken=e.token,this.sendEvent("form.gateway_pkey.retrieved.octobat")},error:(t,e)=>{this.sendEvent("form.gateway_pkey.error.octobat",{message:e.message})}})}confirmOrder(){var t=document.querySelector(this.octobat.getFormSelector()),e=(t.getAttribute("data-octobat-pkey"),t.getAttribute("data-gateway"),t.getAttribute("data-order-id")),n=`${this.octobat.beanieHost}/orders/${e}/confirm`;return new Promise((t,e)=>{try{this.validateFormElements()}catch(t){return void e(t)}this.octobat.authToken;const o=this.serializeForm();i(n,"PATCH",0,o).then(({data:e})=>{e.order&&e.order.status&&(this.octobat.orderStatus=e.order.status),t(e)}).catch(t=>{t.response&&402==t.response.status?(this.octobat.detachPaymentMethod(),e(this._handleCardError(t.response))):t.response&&t.response.data.errors.hasOwnProperty("coupon")?e(this._handleCouponError(t.response)):e(t.response)})})}_handleCouponError(t){var e=document.querySelector(this.octobat.getFormSelector()),n=e.getAttribute("data-octobat-pkey"),o=e.getAttribute("data-order-id"),r=(this.getBindedValue("coupon"),`${this.octobat.beanieHost}/orders/${o}/detach_coupon`);return this.fillBindedFields("octobat-coupon-check",""),this.octobat.coupon=null,this.makeAPICall(r,"DELETE",{},!0,{},n,{success:(t,e)=>{this.octobat.calculateTaxes()}}),{status:t.status,param:"coupon",message:t.data.errors.coupon[0].details,code:t.data.errors.coupon[0].code}}_handleCardError(t){var e={status:t.status};for(var n in t.data.errors)"global"!=n&&(e.param=n),e.message=t.data.errors[n][0].details,e.code=t.data.errors[n][0].code,e.decline_code=t.data.errors[n][0].decline_code,e.next_action=t.data.errors[n][0].next_action;return e}validateFormElements(){if(""===this.getBindedValue("email")||!this.validateEmail(this.getBindedValue("email")))throw new Error("Customer email must be filled and have the right format");if(""===this.getBindedValue("country"))throw new Error("Customer Billing Address Country must be filled")}validateEmail(t){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)}serializeForm(){var t=document.querySelector(this.octobat.getFormSelector()),e={gateway:t.getAttribute("data-gateway")||"stripe"};e.customer={name:this.getBindedValue("name"),email:this.getBindedValue("email"),line1:this.getBindedValue("line1"),line2:this.getBindedValue("line2"),city:this.getBindedValue("city"),zip:this.getBindedValue("zip"),state:this.getBindedValue("state"),country:this.getBindedValue("country")},this.octobat.taxNumberValidation&&!this.octobat.taxIdIsValid?(e.customer.tax_number=null,e.customer.business_type="B2C"):(e.customer.tax_number=""===this.getBindedValue("tax-number")?null:this.getBindedValue("tax-number"),e.customer.business_type=""===this.getBindedValue("tax-number")?"B2C":"B2B");var n=t.getAttribute("data-customer-id")||null;return null!=n&&(e.customer.customer_id=n),e.payment_method=this.octobat.selectedPaymentMethod,JSON.stringify(e)}}(this);this.formHandler=t}getFormSelector(){return this.formSelector}getRequestIdentifier(){return this.requestIdentifier}getBillingModel(){return this.billingModel}getVersion(){return this.version}refreshGatewayPKey(){return this.formHandler.getGatewayPkeyAPICall(!1)}refreshCoupon(){return this.formHandler.validateCoupon()}calculateTaxes(){return this._dispatchTaxEvidenceCalls().then(t=>{this._handleTaxIdValidation(t[0]),this._computeAmounts(),this.formHandler.sendEvent("tax.calculation.done.octobat")})}_dispatchTaxEvidenceCalls(){return Promise.all(this.items.map(t=>t.requestTaxEvidence()))}_computeAmounts(){this.items.forEach(t=>{t.computeAmounts()})}_handleTaxIdValidation(t){null!=t.tax_id_validation&&0==t.tax_id_validation.is_valid?(this.formHandler.sendEvent("tax_id.invalid.octobat"),this.taxIdIsValid=!1):null!=t.tax_id_validation?(this.formHandler.sendEvent("tax_id.valid.octobat"),this.taxIdIsValid=!0):this.taxIdIsValid=null}_setItems(t){if("recurring"==this.billingModel){const e=t.map(t=>t.amount*t.quantity).reduce((t,e)=>t+e,0);t.map(t=>{const n={id:t.id,productType:t.product_type,quantity:t.quantity,name:t.description,baseAmount:t.amount,totalBaseAmount:e,currency:t.currency};this._addItem(n)})}else{const e=t.map(t=>t.amount*t.quantity).reduce((t,e)=>t+e,0);t.map(t=>{if("sku"==t.reference_type){const n={id:t.id,productType:t.product_type,quantity:t.quantity,name:t.description,baseAmount:t.amount,totalBaseAmount:e,currency:t.currency};this._addItem(n)}else{const n={id:t.id,productType:t.product_type,quantity:1,name:t.description,baseAmount:t.amount,totalBaseAmount:e,currency:t.currency};this._addItem(n)}})}}_addItem(t){const e=new class{constructor(t,e){this._octobat=t,this._id=e.id,this._name=e.name,this._currency=e.currency,this._baseAmount=parseInt(e.baseAmount),this._productType=e.productType||"eservice",this._quantity=e.quantity||1,this._taxEvidence=null,this._taxRate=null,this._taxDetails=null,this._taxAmounts=null,this._extrataxAmount=null,this._taxAmount=null,this._taxIncludedAmount=null,this._discountedExtrataxAmount=null,this._discountedTaxAmount=null,this._discountedTaxIncludedAmount=null,this._totalBaseAmount=e.totalBaseAmount}asJson(){return{id:this.id,name:this.name,currency:this.currency,baseAmount:this.baseAmount,productType:this.productType,quantity:this.quantity,taxEvidence:this.taxEvidence,taxRate:this.taxRate,tax:this.tax,extrataxAmount:this.extrataxAmount,discountedAmount:this.discountedAmount,netExtrataxAmount:this.netExtrataxAmount,taxAmount:this.taxAmount,taxIncludedAmount:this.taxIncludedAmount,totalBaseAmount:this.totalBaseAmount,taxAmounts:this.taxAmounts,discountedExtrataxAmount:this.discountedExtrataxAmount,discountedTaxAmount:this.discountedTaxAmount,discountedTaxIncludedAmount:this.discountedTaxIncludedAmount}}requestTaxEvidence(){const t={validate_tax_number:this.octobat.taxNumberValidation,product_type:this.productType,customer_billing_address_country:this.octobat.formHandler.getBindedValue("country"),customer_billing_address_zip:this.octobat.formHandler.getBindedValue("zip"),customer_tax_number:this.octobat.formHandler.getBindedValue("tax-number"),beanie_order_item:this.id};!0===this.octobat.multipleEvidenceCollection&&(this.octobat.selectedPaymentMethod&&(t.payment_source_country=this.octobat.getCustomerPaymentMethodCountry(),t.payment_source_source={gateway:"stripe",source_type:"payment_method",identifier:this.octobat.selectedPaymentMethod}),t.ip_address=this.octobat.getCustomerIP());const e=JSON.stringify(t);return i(this.octobat.serverHost+"/tax_evidence_requests","POST",0,e).then(({data:t})=>(this.taxRate=t.applied_rate,this.taxEvidence=t.id,this.taxDetails=null!==t.tax_details?t.tax_details.map(t=>Object.assign({id:btoa(`${t.tax}:${t.name}:${t.rate}`)},t)):[],t))}computeAmounts(){"inclusive"==this.octobat.taxCalculation?this.computeInclusiveAmounts():"with_exemption"==this.octobat.taxCalculation?this.computeExemptedAmounts():this.computeExclusiveAmounts()}computeInclusiveAmounts(){this.taxRate>0?(this.extrataxAmount=Math.round(this.baseAmount*this.quantity/(1+this.taxRate/100)),this.taxAmount=Math.round(this.extrataxAmount*this.taxRate/100),this.taxIncludedAmount=this.baseAmount*this.quantity):(this.extrataxAmount=this.baseAmount*this.quantity,this.taxAmount=0,this.taxIncludedAmount=this.extrataxAmount),this.discountedTaxIncludedAmount=this.getDiscount(this.taxIncludedAmount),this.taxRate>0?(this.discountedExtrataxAmount=Math.round(this.discountedTaxIncludedAmount/(1+this.taxRate/100)),this.discountedTaxAmount=Math.round(this.discountedExtrataxAmount*this.taxRate/100)):(this.discountedTaxAmount=0,this.discountedExtrataxAmount=this.discountedTaxIncludedAmount),this.taxAmounts=this.taxDetails.map(t=>Object.assign({prediscountTaxAmount:t.rate/this.taxRate*this.taxAmount,discountedTaxAmount:t.rate/this.taxRate*this.discountedTaxAmount,postdiscountTaxAmount:t.rate/this.taxRate*(this.taxAmount-this.discountedTaxAmount)},t)),console.table(this.taxAmounts)}computeExemptedAmounts(){this.octobat.taxIdIsValid&&0==this.taxRate?this.computeExclusiveAmounts():this.computeInclusiveAmounts()}computeExclusiveAmounts(){this.extrataxAmount=this.baseAmount*this.quantity,this.taxAmount=Math.round(this.baseAmount*this.quantity*this.taxRate/100),this.taxIncludedAmount=this.extrataxAmount+this.taxAmount,this.discountedExtrataxAmount=this.getDiscount(this.extrataxAmount),this.discountedTaxAmount=Math.round(this.discountedExtrataxAmount)*this.taxRate/100,this.discountedTaxIncludedAmount=this.discountedExtrataxAmount+this.discountedTaxAmount,this.taxAmounts=this.taxDetails.map(t=>Object.assign({prediscountTaxAmount:t.rate/this.taxRate*this.taxAmount,discountedTaxAmount:t.rate/this.taxRate*this.discountedTaxAmount,postdiscountTaxAmount:t.rate/this.taxRate*(this.taxAmount-this.discountedTaxAmount)},t)),console.table(this.taxAmounts),console.table(this.taxAmounts)}getDiscountablePercentage(){return this.baseAmount*this.quantity/this.totalBaseAmount}getDiscount(t){return null===this.octobat.coupon?0:null===this.octobat.coupon.amount_off?Math.round(t*(this.octobat.coupon.percent_off/100)):this.octobat.coupon.amount_off*this.getDiscountablePercentage()}get octobat(){return this._octobat}get productType(){return this._productType}get id(){return this._id}get name(){return this._name}get taxRate(){return this._taxRate}set taxRate(t){return this._taxRate=t}get taxDetails(){return this._taxDetails}set taxDetails(t){return this._taxDetails=t}get taxAmounts(){return this._taxAmounts}set taxAmounts(t){return this._taxAmounts=t}get taxEvidence(){return this._taxEvidence}set taxEvidence(t){return this._taxEvidence=t}get baseAmount(){return this._baseAmount}get totalBaseAmount(){return this._totalBaseAmount}get quantity(){return this._quantity}get extrataxAmount(){return this._extrataxAmount}set extrataxAmount(t){return this._extrataxAmount=t}get taxAmount(){return this._taxAmount}set taxAmount(t){return this._taxAmount=t}get taxIncludedAmount(){return this._taxIncludedAmount}set taxIncludedAmount(t){return this._taxIncludedAmount=t}get discountedExtrataxAmount(){return this._discountedExtrataxAmount}set discountedExtrataxAmount(t){return this._discountedExtrataxAmount=t}get discountedTaxAmount(){return this._discountedTaxAmount}set discountedTaxAmount(t){return this._discountedTaxAmount=t}get discountedTaxIncludedAmount(){return this._discountedTaxIncludedAmount}set discountedTaxIncludedAmount(t){return this._discountedTaxIncludedAmount=t}}(this,t);this.items.push(e)}getCoupon(){return this.coupon}attachPaymentMethod(t,e=null){this.selectedPaymentMethod=t,"pending"==this.orderStatus&&(this.setCustomerPaymentMethodCountry(e),null!=e&&this.multipleEvidenceCollection&&this.calculateTaxes())}detachPaymentMethod(){this.selectedPaymentMethod&&(this.selectedPaymentMethod=null,"pending"==this.orderStatus&&(this.setCustomerPaymentMethodCountry(null),this.multipleEvidenceCollection&&this.calculateTaxes()))}getCustomerPaymentMethodCountry(){return this._customerPaymentMethodCountry}setCustomerPaymentMethodCountry(t){return this._customerPaymentMethodCountry=t,this.formHandler.setSelectedCountry(),this._customerPaymentMethodCountry}getCustomerIP(){return this._customerIp}getCustomerIPCountry(){return this._customerIpCountry}setRequestIdentifier(t){return this._requestIdentifier=t}getRequestIdentifier(){return this._requestIdentifier}getSelectedPaymentMethodType(){return this._selectedPaymentMethodType}confirmOrder(){return this.formHandler.confirmOrder()}get version(){return this._version}set version(t){return this._version=t}get formSelector(){return this._formSelector}set formSelector(t){return this._formSelector=t}get formHandler(){return this._formHandler}set formHandler(t){return this._formHandler=t}get formIsSubmittable(){return this._formIsSubmittable}set formIsSubmittable(t){return this._formIsSubmittable=t}get formIsDisplayable(){return this._formIsDisplayable}set formIsDisplayable(t){return this._formIsDisplayable=t}get requestIdentifier(){return this._requestIdentifier}set requestIdentifier(t){return this._requestIdentifie=t}get billingModel(){return this._billingModel}set billingModel(t){return this._billingModel=t}get currency(){return this._currency}set currency(t){return this._currency=t}get orderStatus(){return this._orderStatus}set orderStatus(t){return this._orderStatus=t}get billingInterval(){return this._billingInterval}set billingInterval(t){return this._billingInterval=t}get billingIntervalCount(){return this._billingIntervalCount}set billingIntervalCount(t){return this._billingIntervalCount=t}get taxCalculation(){return this._taxCalculation}set taxCalculation(t){return this._taxCalculation=t}get taxNumberValidation(){return this._taxNumberValidation}set taxNumberValidation(t){return this._taxNumberValidation=t}get serverHost(){return this._serverHost}get beanieHost(){return this._beanieHost}get authToken(){return this._authToken}set authToken(t){return this._authToken=t}get multipleEvidenceCollection(){return this._multipleEvidenceCollection}set multipleEvidenceCollection(t){return this._multipleEvidenceCollection=t}get selectedCustomerCountry(){return this._selectedCustomerCountry}set selectedCustomerCountry(t){return this._selectedCustomerCountry=t}get coupon(){return this._coupon}set coupon(t){return this._coupon=t}get items(){return this._items}get taxIdIsValid(){return this._taxIdIsValid}set taxIdIsValid(t){return this._taxIdIsValid=t}set customerIp(t){return this._customerIp=t}set customerIpCountry(t){return this._customerIpCountry=t}get selectedPaymentMethod(){return this._selectedPaymentMethod}set selectedPaymentMethod(t){return this._selectedPaymentMethod=t}get subtotalExtrataxAmount(){return this.items.map(t=>t.extrataxAmount).reduce((t,e)=>t+e,0)}get subtotalTaxAmount(){return this.items.map(t=>t.taxAmount).reduce((t,e)=>t+e,0)}get subtotalTaxIncludedAmount(){return this.items.map(t=>t.taxIncludedAmount).reduce((t,e)=>t+e,0)}get discountedExtrataxAmount(){return this.items.map(t=>t.discountedExtrataxAmount).reduce((t,e)=>t+e,0)}get discountedTaxAmount(){return this.items.map(t=>t.discountedTaxAmount).reduce((t,e)=>t+e,0)}get discountedTaxIncludedAmount(){return this.items.map(t=>t.discountedTaxIncludedAmount).reduce((t,e)=>t+e,0)}get taxAmounts(){const t=function(t,e){return t.reduce(function(t,n){var o=n[e];return t[o]=t[o]||[],t[o].push(n),t},{})}(this.items.map(t=>t.taxAmounts).flat(),"id");return Object.keys(t).map(e=>{const n=t[e].map(t=>t.prediscountTaxAmount).reduce((t,e)=>t+e,0),o=t[e].map(t=>t.discountedTaxAmount).reduce((t,e)=>t+e,0),r=t[e].map(t=>t.postdiscountTaxAmount).reduce((t,e)=>t+e,0);return Object.assign({},t[e][0],{prediscountTaxAmount:n,discountedTaxAmount:o,postdiscountTaxAmount:r,taxAmount:r})})}get totalExtrataxAmount(){return this.subtotalExtrataxAmount-this.discountedExtrataxAmount}get totalTaxAmount(){return this.subtotalTaxAmount-this.discountedTaxAmount}get totalTaxIncludedAmount(){return this.subtotalTaxIncludedAmount-this.discountedTaxIncludedAmount}};window.onload?(v=window.onload,window.onload=()=>{v(),a.formHandler.bindOctobatForm()}):window.onload=()=>{a.formHandler.bindOctobatForm()},e.default=a}]).default});